! 1. To resample a list of spectra using the first spectrum as the template 
! 2. To resample a list of spectra with user-defined parameters 
! Done: First preliminary prototype code 
! USAGE: rsp yes 
!        rsp no 100 50 0 2.5
!
! TODO: user defined output  

! -- pre-request:
! -- All spectra should be found 
!
! written by Zhiyu Zhang
! pmozhang@gmail.com
! last update 15 Nov. 2018

define char*50 resample_logic 
define double N I0 V0 Dv N_out I0_out V0_out Dv_out
sic dele resampled.jcmt
file out resampled.jcmt m  


say "USE the first spectrum in the list as the template? "
let resample_logic &1
if (resample_logic.eq."Y").or.(resample_logic.eq."y").or.(resample_logic.eq."YES").or.(resample_logic.eq."yes") then

    get f 
    let N channels
    let I0 reference
    let V0 velocity
    let Dv velo_step
else 
Say "Please input your own configurations (in velocity)"
    let N  &2
    let I0 &3
    let V0 &4
    let Dv &5
endif


for i 1 to found
    get idx%num[i] 
    resample  N I0 v0 Dv velocity
    write i
next

file in resampled.jcmt
find
